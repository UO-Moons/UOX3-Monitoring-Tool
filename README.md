# 🛡️ UOX3 Monitor Tool

A system tray-based monitoring utility for [UOX3](https://github.com/uox3/uox3), the Ultima Online server emulator.  
This tool keeps your shard running smoothly by automatically restarting the UOX3 server if it crashes and optionally notifies you via Discord.

---

## 🔧 Features

- ✅ Tray icon with Start/Stop control
- ✅ Auto-restarts UOX3 if it exits or crashes
- ✅ Discord webhook integration (optional)
- ✅ Reads shard name from `uox3.ini`
- ✅ Monitors `serverstatus.html` to send player stats to Discord
- ✅ Option to suppress auto-restarts or UOX3 shutdown on Stop
- ✅ Cross-platform (Windows UI / Linux console mode)
- ✅ Configurable via `config.txt`

---

## 📁 Configuration

The tool creates and uses a `config.txt` file in the same folder as the EXE.

Example:
```ini
exePath=C:\Path\To\UOX3\uox3.exe
iniPath=C:\Path\To\UOX3\uox3.ini
statusHtmlPath=C:\Path\To\UOX3\serverstatus.html
useDiscord=true
discordWebhook=https://discord.com/api/webhooks/XXXXXXXXXX
htmlStatusInterval=300
enableHtmlStatusUpdates=true
```

### Config Options:

| Key                       | Description                                                              |
|---------------------------|--------------------------------------------------------------------------|
| `exePath`                 | Full path to your `uox3.exe` file                                        |
| `iniPath`                 | Full path to your `uox3.ini` (used to extract shard name)                |
| `statusHtmlPath`          | Path to `serverstatus.html` file generated by UOX3                       |
| `useDiscord`              | Set `true` to enable Discord notifications                               |
| `discordWebhook`          | Your Discord webhook URL                                                 |
| `htmlStatusInterval`      | Interval in seconds between HTML status updates (default: 300)           |
| `enableHtmlStatusUpdates` | Set `true` to send player/GMs/Counselors stats from the HTML page        |

---

## 🚀 How It Works

- Starts UOX3 when monitoring begins
- Restarts it automatically if it exits unexpectedly
- Sends Discord alerts when:
  - UOX3 starts
  - UOX3 exits
  - Restart attempts happen
  - Player statistics change (if enabled)
- Tracks and logs restart attempts in `restart.log`

---

## 🖥️ Windows Tray Mode

When running on Windows, the app uses a tray icon with a menu:

- ▶️ Start Monitoring
- ⏹ Stop Monitoring
- 🔁 Don't kill UOX3 on Stop (toggle)
- 🛠 Set UOX3 Path
- 🛠 Set INI Path
- 📜 View Log
- ❌ Exit

---

## 🐧 Linux Console Mode

On non-Windows systems, the tool falls back to a simple console mode. It still:

- Restarts UOX3 on crash
- Sends Discord alerts
- Respects `config.txt`

---

## 📄 License

This project is released under the **BSD 2-Clause License** (Simplified BSD).  
See [`LICENSE`](./LICENSE) for details.

---

## 🧙 Credits

Developed by [Dragon Slayer]  
Inspired by the need to keep Ultima Online shards alive and stable without manual babysitting.
